<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>지역 검색 자동완성 테스트</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://cdn.jsdelivr.net/npm/pretendard/dist/web/static/pretendard.css');
        
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .autocomplete-list {
            animation: fadeIn 200ms ease-in-out;
        }
    </style>
</head>
<body class="bg-[#FFFFFF] text-[#111111] min-h-screen p-8">
    <div class="max-w-[1100px] mx-auto">
        <h1 class="text-[32px] font-bold mb-8">날씨 앱 - 지역 검색 자동완성 테스트</h1>
        
        <div class="w-full max-w-md space-y-4">
            <div class="relative">
                <input
                    type="text"
                    id="searchInput"
                    placeholder="지역 검색..."
                    class="w-full px-4 py-3 text-base text-[#111111] bg-[#FFFFFF] border border-[#E5E5E5] rounded-lg focus:outline-none focus:border-[#0070F3] placeholder-[#999999]"
                    autocomplete="off"
                />
                
                <div id="autocompleteResults" class="hidden absolute z-10 w-full mt-1 bg-[#FFFFFF] border border-[#E5E5E5] rounded-lg shadow-sm max-h-64 overflow-y-auto autocomplete-list">
                </div>
            </div>
            
            <div class="p-4 bg-[#F7F7F7] rounded-lg">
                <p class="text-sm text-[#666666]">선택된 지역: <span id="selectedRegion" class="font-medium text-[#111111]">없음</span></p>
            </div>
        </div>
    </div>

    <script>
        const koreanRegions = [
            // 서울
            { id: 'seoul', name: '서울', fullName: '서울특별시' },
            { id: 'jongno', name: '종로구', fullName: '서울특별시 종로구' },
            { id: 'jongno-gyeongbok', name: '경복궁', fullName: '서울특별시 종로구 경복궁' },
            { id: 'gwanghwamun', name: '광화문', fullName: '서울특별시 종로구 광화문' },
            { id: 'gangnam', name: '강남구', fullName: '서울특별시 강남구' },
            { id: 'gangnam-station', name: '강남역', fullName: '서울특별시 강남구 강남역' },
            { id: 'myeongdong', name: '명동', fullName: '서울특별시 중구 명동' },
            { id: 'hongdae', name: '홍대', fullName: '서울특별시 마포구 홍대' },
            { id: 'itaewon', name: '이태원', fullName: '서울특별시 용산구 이태원' },
            { id: 'dongdaemun', name: '동대문', fullName: '서울특별시 중구 동대문' },
            
            // 부산
            { id: 'busan', name: '부산', fullName: '부산광역시' },
            { id: 'haeundae', name: '해운대구', fullName: '부산광역시 해운대구' },
            { id: 'haeundae-beach', name: '해운대해수욕장', fullName: '부산광역시 해운대구 해운대해수욕장' },
            { id: 'gwangalli', name: '광안리', fullName: '부산광역시 수영구 광안리' },
            { id: 'nampo', name: '남포동', fullName: '부산광역시 중구 남포동' },
            
            // 대구
            { id: 'daegu', name: '대구', fullName: '대구광역시' },
            { id: 'seomun', name: '서문시장', fullName: '대구광역시 중구 서문시장' },
            
            // 인천
            { id: 'incheon', name: '인천', fullName: '인천광역시' },
            { id: 'songdo', name: '송도', fullName: '인천광역시 연수구 송도' },
            
            // 경기도
            { id: 'gyeonggi', name: '경기도', fullName: '경기도' },
            { id: 'suwon', name: '수원시', fullName: '경기도 수원시' },
            { id: 'seongnam', name: '성남시', fullName: '경기도 성남시' },
            { id: 'bundang', name: '분당구', fullName: '경기도 성남시 분당구' },
            { id: 'pangyo', name: '판교', fullName: '경기도 성남시 분당구 판교' },
            { id: 'anyang', name: '안양시', fullName: '경기도 안양시' },
            { id: 'bucheon', name: '부천시', fullName: '경기도 부천시' },
            { id: 'gwangmyeong', name: '광명시', fullName: '경기도 광명시' },
            
            // 제주도
            { id: 'jeju', name: '제주도', fullName: '제주특별자치도' },
            { id: 'jeju-city', name: '제주시', fullName: '제주특별자치도 제주시' },
            { id: 'seogwipo', name: '서귀포시', fullName: '제주특별자치도 서귀포시' },
        ];

        const searchInput = document.getElementById('searchInput');
        const autocompleteResults = document.getElementById('autocompleteResults');
        const selectedRegion = document.getElementById('selectedRegion');

        function filterRegions(query) {
            if (query.length === 0) return [];
            
            return koreanRegions.filter(region => 
                region.name.toLowerCase().includes(query.toLowerCase()) ||
                region.fullName.toLowerCase().includes(query.toLowerCase())
            ).slice(0, 8);
        }

        function renderResults(regions) {
            if (regions.length === 0) {
                autocompleteResults.classList.add('hidden');
                return;
            }

            const html = regions.map(region => `
                <div class="px-4 py-3 cursor-pointer border-b border-[#E5E5E5] last:border-b-0 hover:bg-[#F7F7F7] transition-colors" onclick="selectRegion('${region.name}', '${region.fullName}')">
                    <div class="text-sm text-[#111111] font-medium">${region.name}</div>
                    <div class="text-xs text-[#666666] mt-1">${region.fullName}</div>
                </div>
            `).join('');

            autocompleteResults.innerHTML = html;
            autocompleteResults.classList.remove('hidden');
        }

        function selectRegion(name, fullName) {
            searchInput.value = name;
            selectedRegion.textContent = fullName;
            autocompleteResults.classList.add('hidden');
        }

        searchInput.addEventListener('input', (e) => {
            const query = e.target.value;
            const filtered = filterRegions(query);
            renderResults(filtered);
        });

        searchInput.addEventListener('focus', (e) => {
            const query = e.target.value;
            if (query.length > 0) {
                const filtered = filterRegions(query);
                renderResults(filtered);
            }
        });

        document.addEventListener('click', (e) => {
            if (!searchInput.contains(e.target) && !autocompleteResults.contains(e.target)) {
                autocompleteResults.classList.add('hidden');
            }
        });

        // 키보드 내비게이션
        let highlightedIndex = -1;

        searchInput.addEventListener('keydown', (e) => {
            const items = autocompleteResults.querySelectorAll('div[onclick]');
            
            switch(e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    highlightedIndex = Math.min(highlightedIndex + 1, items.length - 1);
                    updateHighlight(items);
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    highlightedIndex = Math.max(highlightedIndex - 1, 0);
                    updateHighlight(items);
                    break;
                case 'Enter':
                    e.preventDefault();
                    if (highlightedIndex >= 0 && items[highlightedIndex]) {
                        items[highlightedIndex].click();
                    }
                    break;
                case 'Escape':
                    autocompleteResults.classList.add('hidden');
                    highlightedIndex = -1;
                    break;
            }
        });

        function updateHighlight(items) {
            items.forEach((item, index) => {
                if (index === highlightedIndex) {
                    item.classList.add('bg-[#F7F7F7]');
                } else {
                    item.classList.remove('bg-[#F7F7F7]');
                }
            });
        }
    </script>
</body>
</html>